apiVersion: v1
kind: ConfigMap
metadata:
  name: janus-config
  labels:
    app: janus
data:
  config.json: |
    {
      "gateway": {
        "listen": ":8080",
        "transport": "http",
        "concurrency_limit": 32,
        "rate_limit_per_minute": 120,
        "circuit_breaker_failures": 5,
        "circuit_breaker_cooldown_seconds": 60
      },
      "runtime": {
        "stateless_mode": true
      },
      "policy": {
        "policy_bundle_path": "/config/policy-bundle.json",
        "verify_signatures": false
      },
      "executor": {
        "sandbox_enabled": true,
        "sandbox_profile": "local",
        "workspace_root": "/workspace"
      },
      "audit": {
        "sink": "stdout"
      },
      "approvals": {
        "enabled": false
      },
      "identity": {
        "principal": "system",
        "agent": "janus",
        "environment": "prod",
        "api_keys": {
          "replace-me": "system"
        },
        "agent_secrets": {
          "janus": "replace-me"
        },
        "oidc": {
          "enabled": false,
          "issuer": "",
          "audience": "",
          "public_key_path": ""
        }
      }
    }
  policy-bundle.json: |
    {"version":"v1","rules":[{"id":"allow-readme","action_type":"fs.read","resource":"file://workspace/README.md","decision":"ALLOW"}]}
